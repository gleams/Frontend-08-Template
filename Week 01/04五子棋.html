<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background: #e0f3da;
        }

        .qipu_box {
            width: 820px;
            height: 820px;
            margin: 20px auto 0;
            background: #a8630b;
            box-shadow: 10px 10px 20px #979797;
            border: 20px solid #83490b;
            border-radius: 20px;
        }

        .qipu {
            border-collapse: collapse;
            width: 100%;
            height: 100%;
            margin: 0 auto;
            border: 1px solid #000;
        }

        .qipu tr td {
            border-bottom: 1px solid #000;
            border-right: 1px solid #000;
            position: relative;
        }

        .qipu tr td span {
            position: absolute;
            width: 80%;
            height: 80%;
            z-index: 1;
            right: -40%;
            bottom: -40%;
            border-radius: 50%;
            cursor: pointer;
            transition: all .1s;

        }

        .qipu tr td span.black {
            background: linear-gradient(to right bottom, gray, black);
            box-shadow: 2px 2px 5px #000000;
        }

        .qipu tr td span.white {
            background: linear-gradient(to right bottom, white, gray);
            box-shadow: 2px 2px 5px #000000;
        }
    </style>
</head>
<body>
<div class="qipu_box">
    <table class="qipu">
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td><span></span></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
</div>

<script>
    let qizi = document.querySelectorAll('span');
    let color = 1;
    let pattern = Array(...Array(14)).map(() => Array(...Array(14)).map(() => 0)); // 定义 14*14的数组默认值为0
    let isWin = false;
    qizi.forEach((el) => {
        el.addEventListener('click', function () {
            const _this = this;
            const x = _this.parentNode.parentNode.rowIndex;
            const y = _this.parentNode.cellIndex;

            // 如果已经有值结束事件。
            if (pattern[x][y] !== 0) {
                return;
            }
            if (isWin) {
                if (3 - color === 1) { //上一步棋子
                    alert('白子已胜');
                }else{
                    alert('黑子已胜');
                }
                return;
            }
            pattern[x][y] = color;
            console.log('x', x);
            console.log('y', y);
            if (color === 1) {
                _this.classList.add('white');
            } else {
                _this.classList.add('black');
            }
            color = 3 - color;
            check();
        }, false)
    });

    let sameNum = 0;
    let count = 0;

    function check() {
        outer:for (let y = 0; y < pattern.length; y++) {
            for (let x = 0; x < pattern[0].length; x++) {
                if (count === 5 && sameNum !== 0) {
                    isWin = true;
                    break outer;
                }
                if (sameNum === pattern[y][x]) {
                    count++
                } else {
                    sameNum = pattern[y][x];
                    count = 1;
                }
            }
        }
        outer2:for(let y = 0;y < pattern.length;y++){
            for (let x = 0; x < pattern[0].length; x++) {
                if (count === 5 && sameNum !== 0) {
                    isWin = true;
                    break outer2;
                }
                if (sameNum === pattern[x][y]) {
                    count++
                } else {
                    sameNum = pattern[x][y];
                    count = 1;
                }
            }
        }
        outer3:for(let x = 0;x<pattern[0].length;x++){
            for(let y = x;y>0;y--){
                if (count === 5 && sameNum !== 0) {
                    isWin = true;
                    break outer3;
                }
                if (sameNum === pattern[y][x-y]) {
                    count++
                } else {
                    sameNum = pattern[y][x-y];
                    count = 1;
                }
            }
        }

    }


</script>
</body>
</html>
